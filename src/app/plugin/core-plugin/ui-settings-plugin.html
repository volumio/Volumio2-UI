<div id="myMusic" ng-controller="UiSettingsPluginController as uiSettingsPlugin"
    class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title"><i class="fa fa-paint-brush"></i> Theme settings</h3>
  </div>
  <div class="panel-body">
    <h4 class="sectionDescription">Upload new background</h4>
    <div ng-if="!uiSettingsPlugin.uploadPercentage">
      <div
          class="uploadDroppableArea"
          ngf-drop="uiSettingsPlugin.uploadBackground()"
          ngf-select="uiSettingsPlugin.uploadBackground()"
          ngf-drag-over-class="'dragover'"
          ng-model="uiSettingsPlugin.backgroundFile"
          name="plugin">
        Click and select new background or drop it here.
      </div>
    </div>

    <div id="installProgressBar" ng-if="uiSettingsPlugin.uploadPercentage > 0">
      <h3>Upload progress:</h3>
      <uib-progressbar
          class="progress-striped active"
          value="uiSettingsPlugin.uploadPercentage"
          type="default">{{uiSettingsPlugin.uploadPercentage}}%
      </uib-progressbar>
    </div>

    <hr>

    <h4 class="sectionDescription">Select background</h4>
    <div id="backgroundSelector" class="row">
      <div class="col-sm-6" ng-repeat-start="background in uiSettingsPlugin.backgrounds.list track by $index">
        <div class="background">
          <img
              ng-click="uiSettingsPlugin.selectBackground(background)"
              ng-class="{'current': uiSettingsPlugin.backgrounds.current.name === background.name}"
              ng-src="{{background.thumbnail}}"
              alt="{{background.name}}" />
          <div class="backgroundName">
            <span ng-class="{'current': uiSettingsPlugin.backgrounds.current.name === background.name}">
              {{background.name}}
            </span>
            <p ng-if="uiSettingsPlugin.backgrounds.current.name !== background.name">
              <button type="button" class="btn btn-info" ng-click="uiSettingsPlugin.selectBackground(background)" title="Apply Background">
                <i class="fa fa-check"></i>
              </button>
              <button type="button" class="btn btn-danger" ng-if="!background.notDeletable" ng-click="uiSettingsPlugin.deleteBackground(background)" title="Delete Background">
                <i class="fa fa-trash"></i>
              </button>
            </p>
          </div>
        </div>
      </div>
      <div ng-repeat-end ng-if="($index + 1) % 4 === 0" class="clearfix"></div>
    </div>
  </div>
</div>